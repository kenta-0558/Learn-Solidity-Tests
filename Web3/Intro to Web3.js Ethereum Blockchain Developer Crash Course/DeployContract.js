const EthereumTx = require('ethereumjs-tx').Transaction

const Web3 = require('web3');
const web3 = new Web3('http://localhost:8545');

const address1 = "0x132740EA756C7c45A35d22dE57Bd4A10E889135E";
const privateKey1 = Buffer.from("d0c0731cadf3d7226f2acb93f98c222bd46b794a7ee0ca87fd4e3c606bef2c93", 'hex');

web3.eth.getTransactionCount(address1, (err, txCount) => {

    const data = '0x60806040526040518060400160405280600681526020017f4b696963686900000000000000000000000000000000000000000000000000008152506000908051906020019061004f929190610067565b50600860015534801561006157600080fd5b5061016b565b8280546100739061010a565b90600052602060002090601f01602090048101928261009557600085556100dc565b82601f106100ae57805160ff19168380011785556100dc565b828001600101855582156100dc579182015b828111156100db5782518255916020019190600101906100c0565b5b5090506100e991906100ed565b5090565b5b808211156101065760008160009055506001016100ee565b5090565b6000600282049050600182168061012257607f821691505b602082108114156101365761013561013c565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b603f806101796000396000f3fe6080604052600080fdfea264697066735822122036ed0b2914f99a76816a75c33b96b77d13147f461034cdd6f8e4da92caa87fa664736f6c63430008040033';

    const txObject = {
        nonce: web3.utils.toHex(txCount),
        gasLimit: web3.utils.toHex(1000000),
        gasPrice: web3.utils.toHex(web3.utils.toWei('10', 'gwei')),
        data: data,
    }

    const tx = new EthereumTx(txObject);
    tx.sign(privateKey1);

    const serializedTx = tx.serialize();
    const raw = '0x' + serializedTx.toString('hex');

    web3.eth.sendSignedTransaction(raw, (err, txHash) => {
        console.log('err', err, 'txHash', txHash);
    })
})